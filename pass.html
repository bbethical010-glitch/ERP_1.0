<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Encore After Party ¬∑ Digital Pass</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Montserrat', sans-serif;
  background: url("https://www.thegrandarc.com/images/grand-banner.jpg") center/cover no-repeat fixed;
}
.overlay {
  background: linear-gradient(180deg, rgba(8,0,25,0.88), rgba(0,0,0,0.92));
  min-height: 100vh;
}
h1,h2,h3 { font-family: 'Orbitron', sans-serif; }
.glass {
  background: rgba(15,15,30,0.75);
  backdrop-filter: blur(14px);
  border: 1px solid rgba(255,255,255,0.12);
}
</style>
</head>

<body>
<div id="passwordGate" class="overlay flex items-center justify-center">
  <div class="glass p-6 rounded-xl text-center w-80">
    <h2 class="text-white mb-4">Enter Access Code</h2>
    <input id="pw" type="password" placeholder="ENCORE2026"
      class="w-full p-3 rounded bg-black text-white mb-4">
    <button onclick="unlock()" class="w-full bg-pink-500 text-black font-bold py-2 rounded">
      Unlock Pass
    </button>
  </div>
</div>

<div id="app" class="overlay hidden flex flex-col items-center px-4 py-8">

<h1 class="text-white text-4xl mb-2">Encore After Party</h1>
<p class="text-cyan-300 mb-6">Class of 2025‚Äì26 ¬∑ Invite Only</p>

<div class="glass max-w-md w-full p-6 rounded-2xl mb-6">
  <p class="text-gray-400 text-sm mb-3">Enter your unique ID</p>
  <input id="entryId" placeholder="JAI-0XX"
    class="w-full p-3 text-center text-lg uppercase rounded bg-black text-white mb-4">
  <button id="checkBtn"
    class="w-full bg-pink-500 text-black font-bold py-3 rounded">
    CHECK PASS STATUS
  </button>
</div>

<div id="resultCard" class="glass max-w-md w-full p-6 rounded-2xl hidden text-center">
  <h3 id="resTitle" class="text-2xl mb-2"></h3>
  <p id="resName" class="mb-1"></p>
  <p id="resId" class="mb-1"></p>
  <p id="resStatus" class="mb-4"></p>

  <button id="pdfBtn"
    class="bg-green-400 text-black font-bold px-6 py-3 rounded hidden">
    Download Digital Pass (PDF)
  </button>
</div>

<div class="glass max-w-md w-full p-6 rounded-2xl mt-6 text-center text-sm text-gray-300">
  <p>üìÖ 1 February 2026 ¬∑ 5:00 PM</p>
  <p>üìç Saras Elysium, The Grand Arc Hotel</p>
</div>

<div class="max-w-md w-full mt-6 flex gap-4">
  <a href="https://www.google.com/maps/search/?api=1&query=Saras+Elysium+The+Grand+Arc+Hotel"
     target="_blank"
     class="flex-1 bg-cyan-400 text-black font-bold py-3 rounded text-center">
    Open Maps
  </a>
  <a href="https://wa.me/917007520015"
     target="_blank"
     class="flex-1 bg-green-400 text-black font-bold py-3 rounded text-center">
    WhatsApp Help
  </a>
</div>

<p class="text-xs text-gray-500 mt-6 text-center max-w-md">
This digital pass is for reference only. Final entry is verified live at the gate.
</p>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, doc, getDoc } from
"https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

/* üî¥ REPLACE WITH YOUR REAL CONFIG */
const firebaseConfig = {
  apiKey: "AIzaSyBoMIeT_axIVSyyhBC8PRzcO9z0bhIIyXA",
  authDomain: "encore-entry-system.firebaseapp.com",
  projectId: "encore-entry-system"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const btn = document.getElementById("checkBtn");
const card = document.getElementById("resultCard");
const pdfBtn = document.getElementById("pdfBtn");

btn.onclick = async () => {
  const id = document.getElementById("entryId").value.trim().toUpperCase();
  if (!id) return;

  const ref = doc(db, "guest_list", id);
  const snap = await getDoc(ref);

  card.classList.remove("hidden");
  pdfBtn.classList.add("hidden");

  if (!snap.exists()) {
    setResult("‚ùå Invalid Pass", "", "", "Please check your ID", false);
    return;
  }

  const d = snap.data();
  document.getElementById("resName").innerText = `Name: ${d.name}`;
  document.getElementById("resId").innerText = `ID: ${id}`;

  if (d.checkedIn) {
    setResult("üö´ Already Used", "", "", "This pass has been used", false);
  } else if (!d.paid) {
    setResult("üí∞ Payment Pending", "", "", "Please contact organizer", false);
  } else {
    setResult("üéâ Pass Active", "", "", "Eligible for entry", true);
    confetti();
    pdfBtn.classList.remove("hidden");
  }
};

function setResult(title, n, i, status, ok) {
  document.getElementById("resTitle").innerText = title;
  document.getElementById("resStatus").innerText = status;
  document.getElementById("resTitle").className =
    ok ? "text-green-400 text-2xl" : "text-red-400 text-2xl";
}

pdfBtn.onclick = () => {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.setFontSize(18);
  doc.text("Encore After Party ‚Äì Digital Pass", 20, 20);
  doc.setFontSize(12);
  doc.text(document.getElementById("resName").innerText, 20, 40);
  doc.text(document.getElementById("resId").innerText, 20, 50);
  doc.text("Status: Eligible for Entry", 20, 60);
  doc.text("Note: Final verification happens at the gate.", 20, 80);
  doc.save("Encore_Digital_Pass.pdf");
};
</script>

<script>
const PASSWORD = "ENCORE2026";
function unlock() {
  if (document.getElementById("pw").value === PASSWORD) {
    document.getElementById("passwordGate").classList.add("hidden");
    document.getElementById("app").classList.remove("hidden");
  } else {
    alert("Wrong access code");
  }
}
</script>

</body>
</html>
